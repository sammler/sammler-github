{"version":3,"sources":["ghUtils.js"],"names":["getAll","ghClient","fnName","options","cb","Error","items","nameSpace","toString","split","resolvedFnName","length","forEach","name","fetchResult","err","res","done","concat","hasNextPage","getNextPage","returnResult"],"mappings":";;;;;QAUgBA,M,GAAAA,M;AAVhB;;;;;;;;;;AAUO,SAASA,MAAT,CAAkBC,QAAlB,EAA4BC,MAA5B,EAAoCC,OAApC,EAA6CC,EAA7C,EAAkD;;AAErD,QAAK,CAACA,EAAD,IAAO,OAAOA,EAAP,KAAc,UAA1B,EAAuC;AACnC,cAAM,IAAIC,KAAJ,CAAW,qBAAX,CAAN;AACH;;AAED,QAAIC,QAAQ,EAAZ;;AAEA,QAAIC,YAAaL,MAAD,CAASM,QAAT,GAAoBC,KAApB,CAA2B,GAA3B,CAAhB;AACA,QAAIC,iBAAiBT,QAArB;AACA,QAAKM,UAAUI,MAAV,GAAmB,CAAxB,EAA4B;AACxBJ,kBAAUK,OAAV,CAAmB,UAAWC,IAAX,EAAkB;AACjCH,6BAAiBA,eAAeG,IAAf,CAAjB;AACH,SAFD;AAGH;AACDH,mBAAgBP,OAAhB,EAAyBW,WAAzB;;AAEA,aAASA,WAAT,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAkC;AAC9B,YAAKD,GAAL,EAAW;AACP,mBAAOE,KAAKF,GAAL,CAAP;AACH;;AAEDT,gBAAQA,MAAMY,MAAN,CAAcF,GAAd,CAAR;AACA,YAAKf,SAASkB,WAAT,CAAsBH,GAAtB,CAAL,EAAmC;AAC/Bf,qBAASmB,WAAT,CAAsBJ,GAAtB,EAA2BF,WAA3B;AACH,SAFD,MAEO;AACHO;AACH;AACJ;;AAED,aAASA,YAAT,GAAyB;AACrB,eAAOjB,GAAI,IAAJ,EAAUE,KAAV,CAAP;AACH;AAEJ","file":"ghUtils.js","sourcesContent":["/**\n * Get results from all pages\n *\n * @param {object} ghClient - Authenticated GitHub client\n * @param {string} fnName - The function name, e.g. \"repos.getAll\"\n * @param {object} options - Options for the function tot be called\n * @param {callback} cb - Callback\n *\n * @see https://github.com/mikedeboer/node-github/blob/master/examples/getStarred.js\n */\nexport function getAll ( ghClient, fnName, options, cb ) {\n\n    if ( !cb || typeof cb !== 'function' ) {\n        throw new Error( 'No callback defined' );\n    }\n\n    let items = [];\n\n    let nameSpace = (fnName).toString().split( '.' );\n    let resolvedFnName = ghClient;\n    if ( nameSpace.length > 0 ) {\n        nameSpace.forEach( function ( name ) {\n            resolvedFnName = resolvedFnName[name];\n        } );\n    }\n    resolvedFnName( options, fetchResult );\n\n    function fetchResult ( err, res ) {\n        if ( err ) {\n            return done(err);\n        }\n\n        items = items.concat( res );\n        if ( ghClient.hasNextPage( res ) ) {\n            ghClient.getNextPage( res, fetchResult );\n        } else {\n            returnResult();\n        }\n    }\n\n    function returnResult () {\n        return cb( null, items );\n    }\n\n}\n"],"sourceRoot":"/Users/swr/git/sammler/sammler-middleware-github/src"}